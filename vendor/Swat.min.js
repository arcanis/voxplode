(function(b){function a(b,d){if({}.hasOwnProperty.call(a.cache,b))return a.cache[b];var e=a.resolve(b);if(!e)throw new Error('Failed to resolve module '+b);var c={id:b,require:a,filename:b,exports:{},loaded:!1,parent:d,children:[]};d&&d.children.push(c);var f=b.slice(0,b.lastIndexOf('/')+1);return a.cache[b]=c.exports,e.call(c.exports,c,c.exports,f,b),c.loaded=!0,a.cache[b]=c.exports}var c=function(a){return a='/',{title:'browser',version:'v0.8.22',browser:!0,env:{},argv:[],nextTick:function(a){setTimeout(a,0)},cwd:function(){return a},chdir:function(b){a=b}}}();a.modules={},a.cache={},a.resolve=function(b){return{}.hasOwnProperty.call(a.modules,b)?a.modules[b]:void 0},a.define=function(b,c){a.modules[b]=c},a.define('/manifest.js',function(c,b,d,e){b.thread={},b.device={},b.time={},b.Event=a('/src/Event.js',c).Event,b.screen=a('/src/screen.js',c).screen,b.thread.Pool=a('/src/thread/Pool.js',c).Pool,b.thread.Solo=a('/src/thread/Solo.js',c).Solo,b.thread.Multi=a('/src/thread/Multi.js',c).Multi,b.ticker=a('/src/ticker.js',c).ticker,b.device.keyboard=a('/src/device/keyboard.js',c).keyboard,b.device.Key=a('/src/device/Key.js',c).Key,b.device.Keyset=a('/src/device/Keyset.js',c).Keyset,b.device.mouse=a('/src/device/mouse.js',c).mouse,b.device.Button=a('/src/device/Button.js',c).Button,b.math=a('/src/math.js',c).math,b.time.Delta=a('/src/time/Delta.js',c).Delta,b.time.Timeout=a('/src/time/Timeout.js',c).Timeout,b.time.AnimationFrame=a('/src/time/AnimationFrame.js',c).AnimationFrame}),a.define('/src/time/AnimationFrame.js',function(d,f,g,h){var e=a('/lib/three.js',d).three;var c=a('/lib/window.js',d).window;var b=f.AnimationFrame=function(a){this._callback=a,this._clock=this.clock=new e.Clock,this._timer=null};b.prototype.fire=function(){return this.disarm(),this._callback.call(null,this),this},b.prototype.rearm=function(){return this._timer!==null?this:(this._timer=c.requestAnimationFrame(this.fire.bind(this)),this)},b.prototype.disarm=function(){return this._timer===null?this:(c.cancelAnimationFrame(this._timer),this._timer=null,this)}}),a.define('/lib/window.js',function(b,a,c,d){a.window=window}),a.define('/lib/three.js',function(b,a,c,d){a.three=THREE}),a.define('/src/time/Timeout.js',function(d,f,g,h){var e=a('/lib/three.js',d).three;var c=a('/lib/window.js',d).window;var b=f.Timeout=function(a,b){this._callback=a,this._delay=b,this._clock=this.clock=new e.Clock,this._timer=null};b.prototype.fire=function(){return this.disarm(),this._callback.call(null,this),this},b.prototype.rearm=function(){return this._timer!==null?this:(this._timer=c.setTimeout(this.fire.bind(this),this._delay),this)},b.prototype.disarm=function(){return this._timer===null?this:(c.clearTimeout(this._timer),this._timer=null,this)}}),a.define('/src/time/Delta.js',function(d,e,f,g){var c=a('/lib/three.js',d).three;var b=e.Delta=function(a,b){this._callback=a,this._delay=b/1e3,this._clock=this.clock=new c.Clock,this._ticks=0};b.prototype.fire=function(){var a=Math.floor(this._ticks/this._delay);return this.disarm(),this._callback.call(null,this,a),this},b.prototype.rearm=function(){return this},b.prototype.disarm=function(){return this._ticks=this._ticks%this._delay,this},b.prototype.tick=function(a){return this._ticks+=a,this._ticks>=this._delay&&this.fire(),this}}),a.define('/src/math.js',function(b,a,c,d){a.math={random:function(a,b){return a+Math.random()*(b-a)},clamp:function(d,a,b){if(a>b){var c=a;a=b,b=c}return Math.max(Math.min(d,b),a)},truncate:function(b,c){var a=Math.pow(10,c);return Math.round(b*a)/a}}}),a.define('/src/device/Button.js',function(b,a,c,d){a.Button={LEFT:1,RIGHT:2,MIDDLE:3}}),a.define('/src/device/mouse.js',function(e,f,h,i){var c=a('/lib/three.js',e).three;var g=a('/lib/window.js',e).window;var b=function(){this._buttons=Object.create(null),this._client=this.client=new c.Vector2,this._movement=this.movement=new c.Vector2};b.prototype.client=null,b.prototype.movement=null,b.prototype.mousedown=function(a){return this._buttons[a]={locked:!1},this},b.prototype.mouseup=function(a){return delete this._buttons[a],this},b.prototype.mousemove=function(a,b){return this._client=this.client=a,this._movement=this.movement=b,this},b.prototype.pressed=function(a,b){return a===void 0&&(a=!1),!this._buttons[a]||this._buttons[a].locked?!1:b?this._buttons[a].locked=!0:!0};var d=f.mouse=new b;document.addEventListener('mousedown',function(a){d.mousedown(a.which)}),document.addEventListener('mouseup',function(a){d.mouseup(a.which)}),document.addEventListener('mousemove',function(a){var b=new c.Vector2(a.clientX,a.clientY);var e=new c.Vector2(a.movementX,a.movementY);d.mousemove(b,e)})}),a.define('/src/device/Keyset.js',function(c,d,e,f){var b=a('/src/device/Key.js',c).Key;d.Keyset={AZERTY:[b.Q,b.Z,b.D,b.S],QWERTY:[b.A,b.W,b.D,b.S],LEFT:[b.A,b.Q,b.LEFT],UP:[b.Z,b.W,b.UP],RIGHT:[b.D,b.RIGHT],DOWN:[b.S,b.DOWN]}}),a.define('/src/device/Key.js',function(b,a,c,d){a.Key={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,BACKSPACE:8,ENTER:13}}),a.define('/src/device/keyboard.js',function(e,f,g,h){var d=a('/lib/window.js',e).window;var b=function(){this._keys=Object.create(null)};b.prototype.keydown=function(a){return this._keys[a]||(this._keys[a]={locked:!1}),this},b.prototype.keyup=function(a){return delete this._keys[a],this},b.prototype.some=function(a){return a.some(function(a){return this.pressed(a)},this)},b.prototype.pressed=function(a,b){return b===void 0&&(b=!1),!this._keys[a]||this._keys[a].locked?!1:(b&&(this._keys[a].locked=!0),!0)};var c=f.keyboard=new b;document.addEventListener('keydown',function(a){c.keydown(a.keyCode)}),d.addEventListener('keyup',function(a){c.keyup(a.keyCode)})}),a.define('/src/ticker.js',function(c,f,h,i){var d=a('/src/time/AnimationFrame.js',c).AnimationFrame;var e=a('/src/time/Timeout.js',c).Timeout;var b=function(){this._states=[],this._engineTimeout=new e(this._engineUpdate.bind(this),16.666666666666668),this._drawTimeout=new d(this._drawUpdate.bind(this))};b.prototype.start=function(){return this._run?this:(this._run=!0,this._engineTimeout.fire(),this._drawTimeout.fire(),this)},b.prototype.stop=function(){return this._run?(this._run=!1,this._engineTimeout.disarm(),this._drawTimeout.disarm(),this):this},b.prototype.add=function(a){return this._states.indexOf(a)!==-1?this:(this._states.push(a),this)},b.prototype.remove=function(a){return this._states.splice(this._states.indexOf(a),1),this},b.prototype._engineUpdate=function(){var a=arguments;this._engineTimeout.rearm(),this._states.forEach(function(b){b.engineUpdate&&b.engineUpdate.apply(b,a)})},b.prototype._drawUpdate=function(){var a=arguments;this._drawTimeout.rearm(),this._states.forEach(function(b){b.drawUpdate&&b.drawUpdate.apply(b,a)})};var g=f.ticker=new b}),a.define('/src/thread/Multi.js',function(d,e,f,g){var c=a('/lib/window.js',d).window;var b=e.Multi=function(a){this._sources=a};b.script=['( function ( ) {','    var origin, dirname;','','    var realImportScripts = self.importScripts;','    self.importScripts = function ( ) {','        return realImportScripts.apply( this, Array.prototype.map.call( arguments, function ( source ) {','            source = source.toString( );','',"            if ( source.indexOf( ':' ) !== - 1 )",'                return source;','',"            if ( source[ 0 ] === '/' )",'                source = origin + source;','','            return origin + dirname + source;','','        } ) );','    };','','    var fn = function ( e ) {',"        self.removeEventListener( 'message', fn );",'        origin = e.data.origin, dirname = e.data.dirname;','        self.importScripts.apply( self, e.data.sources );','    };','',"    self.addEventListener( 'message', fn );",'','} )( );'],b.url=function(){return b._url||(b._url=c.URL.createObjectURL(new c.Blob([b.script.join('\n')],{type:'text/javascript'}))),b._url},b.prototype.build=function(){var a=new c.Worker(b.url());var d=c.location.origin;var e=c.location.pathname.substr(0,c.location.pathname.lastIndexOf('/'))+'/';return a.postMessage({origin:d,dirname:e,sources:this._sources}),a}}),a.define('/src/thread/Solo.js',function(d,e,f,g){var b=a('/lib/window.js',d).window;var c=e.Solo=function(a){this._source=a};c.prototype.build=function(){return new b.Worker(this._source)}}),a.define('/src/thread/Pool.js',function(d,e,f,g){var c=a('/src/Event.js',d).Event;var b=e.Pool=function(d,e){c.initialize(this),this._tasks=[],this._instances=[],this._availableInstances=[];for(var a=0;a<e;++a){var b=d.build();b.addEventListener('message',this._complete.bind(this,a)),b.addEventListener('error',this._error.bind(this,a)),this._instances.push({worker:b,task:null}),this._availableInstances.push(a)}};c.install(b.prototype,['push','shift','complete','error']),b.prototype.broadcast=function(a){return this._instances.forEach(function(b){b.worker.postMessage(a)}),this},b.prototype.push=function(a){return this._tasks.push(a),this.dispatchEvent('push',{task:a}),this.shift(),this},b.prototype.shift=function(){if(this._tasks.length===0||this._availableInstances.length===0)return this;var a=this._tasks.shift();var b=this._instances[this._availableInstances.shift()];return b.worker.postMessage(b.task=a),this.dispatchEvent('shift',{task:a}),this},b.prototype.steady=function(){return this._tasks.length===0&&this._instances.length===this._availableInstances.length},b.prototype._extractTask=function(a){var b=this._instances[a].task;return this._instances[a].task=null,b},b.prototype._complete=function(b,a){if(a.data instanceof Array){console.log.apply(console,a.data);return}this._availableInstances.push(b),this.dispatchEvent('complete',{task:this._extractTask(b),data:a.data}),this.shift()},b.prototype._error=function(a,b){this._availableInstances.push(a),this.dispatchEvent('error',{task:this._extractTask(a),event:b}),this.shift()}}),a.define('/src/Event.js',function(c,b,d,e){var a=b.Event={install:function(b,c){b._events=c,b.addEventListener=a.addEventListener,b.removeEventListener=a.removeEventListener,b.dispatchEvent=a.dispatchEvent,b.nextEventListener=a.nextEventListener},initialize:function(a){a._handlers=Object.create(null)},split:function(b,a){return b.split(/(?:, *)|(?:,? +)/g).map(function(b){if(a.indexOf(b)===-1)throw new Error('Unexpected event "'+b+'", expected one of "'+a.join('", "')+'"');return b})},bind:function(a,b,c,d,e){a._handlers[b]||(a._handlers[b]=[]),a._handlers[b].push({callback:c,context:d,persists:e})},unbind:function(c,d,f,g){if(!c._handlers[d])return;var b=c._handlers[d];for(var a=0,e=b.length;a<e;++a)if(b[a].callback===f&&b[a].context===g)break;b.splice(a,1)},trigger:function(b,c,e){var d='on'+c[0].toUpperCase()+c.substr(1);if(b[d]&&b[d](e),!b._handlers[c])return;b._handlers[c].slice().forEach(function(c){c.callback.call(c.context,e),c.persists||(a.unbind(b,c.callback,c.context),c.persists=!0)})},addEventListener:function(c,d,b){return b===void 0&&(b=this),a.split(c,this._events).forEach(function(c){a.bind(this,c,d,b,!0)},this),this},nextEventListener:function(c,d,b){return b===void 0&&(b=this),a.split(c,this._events).forEach(function(c){a.bind(this,c,d,b,!1)},this),this},removeEventListener:function(c,d,b){return b===void 0&&(b=this),a.split(c,this._events).forEach(function(c){a.unbind(this,c,d,b)}),this},dispatchEvent:function(c,b){return b===void 0&&(b={}),a.split(c,this._events).forEach(function(c){a.trigger(this,c,b)},this),this}}}),a.define('/src/screen.js',function(f,h,i,j){var c=a('/lib/window.js',f).window;var g=a('/lib/three.js',f).three;var b=h.screen=new g.WebGLRenderer({antialias:!0});var d=function(){b.domElement.style.position='absolute',b.domElement.style.left='0',b.domElement.style.top='0',document.body.appendChild(b.domElement),e()};var e=function(){b.setSize(c.innerWidth,c.innerHeight)};document.readyState!=='complete'?c.addEventListener('load',d):d(),c.addEventListener('resize',e)}),b.SWAT=a('/manifest.js')}.call(this,this))
/*
//@ sourceMappingURL=Swat.map.js
*/