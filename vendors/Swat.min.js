(function(b){function a(b,d){if({}.hasOwnProperty.call(a.cache,b))return a.cache[b];var e=a.resolve(b);if(!e)throw new Error('Failed to resolve module '+b);var c={id:b,require:a,filename:b,exports:{},loaded:!1,parent:d,children:[]};d&&d.children.push(c);var f=b.slice(0,b.lastIndexOf('/')+1);return a.cache[b]=c.exports,e.call(c.exports,c,c.exports,f,b),c.loaded=!0,a.cache[b]=c.exports}var c=function(a){return a='/',{title:'browser',version:'v0.10.2',browser:!0,env:{},argv:[],nextTick:function(a){setTimeout(a,0)},cwd:function(){return a},chdir:function(b){a=b}}}();a.modules={},a.cache={},a.resolve=function(b){return{}.hasOwnProperty.call(a.modules,b)?a.modules[b]:void 0},a.define=function(b,c){a.modules[b]=c},a.define('/manifest.js',function(c,b,d,e){b.thread={},b.data={},b.device={},b.time={},b.exec={},b.Event=a('/src/Event.js',c).Event,b.thread.Pool=a('/src/thread/Pool.js',c).Pool,b.thread.Solo=a('/src/thread/Solo.js',c).Solo,b.thread.Multi=a('/src/thread/Multi.js',c).Multi,b.ticker=a('/src/ticker.js',c).ticker,b.data.Stream=a('/src/data/Stream.js',c).Stream,b.data.Pipe=a('/src/data/Pipe.js',c).Pipe,b.device.console=a('/src/device/console.js',c).console,b.device.screen=a('/src/device/screen.js',c).screen,b.device.keyboard=a('/src/device/keyboard.js',c).keyboard,b.device.Key=a('/src/device/Key.js',c).Key,b.device.Keyset=a('/src/device/Keyset.js',c).Keyset,b.device.mouse=a('/src/device/mouse.js',c).mouse,b.device.Button=a('/src/device/Button.js',c).Button,b.math=a('/src/math.js',c).math,b.time.FPSCounter=a('/src/time/FPSCounter.js',c).FPSCounter,b.time.Delta=a('/src/time/Delta.js',c).Delta,b.time.Timeout=a('/src/time/Timeout.js',c).Timeout,b.time.AnimationFrame=a('/src/time/AnimationFrame.js',c).AnimationFrame,b.exec.cli=a('/src/exec/cli.js',c).cli,b.exec.shell=a('/src/exec/shell.js',c).shell}),a.define('/src/exec/shell.js',function(d,h,k,j){var c=a('/src/data/Pipe.js',d).Pipe;var e=a('/src/data/Stream.js',d).Stream;var g=a('/src/time/Timeout.js',d).Timeout;var f=a('/src/exec/cli.js',d).cli;var b=function(){this._commands=Object.create(null),this.registerCommand('help',function(b,a){a.write('Available commands are :\n'),a.write(Object.keys(this._commands).sort(function(a,b){return a<b?-1:a>b?1:0}).join(', ')+'\n'),a.end()},this)};b.prototype.registerCommand=function(a,c,b){if(b===void 0&&(b=null),this._commands[a])throw new Error('Shell command redefinition : "'+a+'"');return this._commands[a]={callback:c,context:b},this},b.prototype.unregisterCommand=function(a){return delete this._commands[a],this},b.prototype.eval=function(c){var b=new e().end(),a=new e;var d=this._execute(f.parse(c),b,a);return a},b.prototype._execute=function(a,b,c){this['_type_'+a.type](a,b,c)},b.prototype._type_multi=function(a,d,e){var b=function(f){if(f===a.commands.length)return;var g=new c;this._execute(a.commands[f],d,g.output),g.output.forwardTo(e,f+1===a.commands.length),g.output.addEventListener('end',function(){b(f+1)})}.bind(this);b(0)},b.prototype._type_pipe=function(b,d,e){var a=new c;a.output.forwardTo(e),b.commands.slice().reverse().forEach(function(d){var b=new c;this._execute(d,b.output,a.input),a=b},this),d.forwardTo(a.input)},b.prototype._type_command=function(a,c,b){new g(function(){if(!this._commands[a.arguments[0]])b.end(new Error('Command not found: "'+a.arguments[0]+'"'));else{var d=this._commands[a.arguments[0]];d.callback.call(d.context,c,b,a.arguments)}}.bind(this),0).rearm()};var i=h.shell=new b}),a.define('/src/exec/cli.js',function(b,a,c,d){a.cli=function(a){function b(a){return'"'+a.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\x08/g,'\\b').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\f/g,'\\f').replace(/\r/g,'\\r').replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}return a={parse:function(c,i){function e(b){if(a<g)return;a>g&&(g=a,l=[]),l.push(b)}function r(){var f,i,b,g;var k,l,h;if(k=a,l=a,f=j(),f!==null){if(h=a,c.charCodeAt(a)===59?(b=';',a++):(b=null,d===0&&e('";"')),b!==null?(g=j(),g!==null?b=[b,g]:(b=null,a=h)):(b=null,a=h),b!==null){i=[];while(b!==null)i.push(b),h=a,c.charCodeAt(a)===59?(b=';',a++):(b=null,d===0&&e('";"')),b!==null?(g=j(),g!==null?b=[b,g]:(b=null,a=h)):(b=null,a=h)}else i=null;i!==null?f=[f,i]:(f=null,a=l)}else f=null,a=l;return f!==null&&(f=function(c,a,b){return{type:'multi',commands:[a].concat(b.map(function(a){return a[1]}))}}(k,f[0],f[1])),f===null&&(a=k),f===null&&(f=j()),f}function j(){var f,j,b,g;var k,l,i;if(k=a,l=a,f=h(),f!==null){if(i=a,c.charCodeAt(a)===124?(b='|',a++):(b=null,d===0&&e('"|"')),b!==null?(g=h(),g!==null?b=[b,g]:(b=null,a=i)):(b=null,a=i),b!==null){j=[];while(b!==null)j.push(b),i=a,c.charCodeAt(a)===124?(b='|',a++):(b=null,d===0&&e('"|"')),b!==null?(g=h(),g!==null?b=[b,g]:(b=null,a=i)):(b=null,a=i)}else j=null;j!==null?f=[f,j]:(f=null,a=l)}else f=null,a=l;return f!==null&&(f=function(c,a,b){return{type:'pipe',commands:[a].concat(b.map(function(a){return a[1]}))}}(k,f[0],f[1])),f===null&&(a=k),f===null&&(f=h()),f}function h(){var b,f,l,j,k,g;var h,i;if(h=a,f=o(),f!==null){b=[];while(f!==null)b.push(f),f=o()}else b=null;if(b!==null&&(b=function(b,a){return{type:'command',arguments:a.filter(function(a){return a!==undefined})}}(h,b)),b===null&&(a=h),b===null){h=a,i=a,b=[],/^[ \t\r\n]/.test(c.charAt(a))?(f=c.charAt(a),a++):(f=null,d===0&&e('[ \\t\\r\\n]'));while(f!==null)b.push(f),/^[ \t\r\n]/.test(c.charAt(a))?(f=c.charAt(a),a++):(f=null,d===0&&e('[ \\t\\r\\n]'));if(b!==null)if(c.charCodeAt(a)===40?(f='(',a++):(f=null,d===0&&e('"("')),f!==null)if(l=r(),l!==null)if(c.charCodeAt(a)===41?(j=')',a++):(j=null,d===0&&e('")"')),j!==null){k=[],/^[ \t\r\n]/.test(c.charAt(a))?(g=c.charAt(a),a++):(g=null,d===0&&e('[ \\t\\r\\n]'));while(g!==null)k.push(g),/^[ \t\r\n]/.test(c.charAt(a))?(g=c.charAt(a),a++):(g=null,d===0&&e('[ \\t\\r\\n]'));k!==null?b=[b,f,l,j,k]:(b=null,a=i)}else b=null,a=i;else b=null,a=i;else b=null,a=i;else b=null,a=i;b!==null&&(b=function(b,a){return a}(h,b[2])),b===null&&(a=h)}return b}function o(){var b,g;var f;if(f=a,g=m(),g!==null){b=[];while(g!==null)b.push(g),g=m()}else b=null;return b!==null&&(b=function(b,a){return a.join('')}(f,b)),b===null&&(a=f),b===null&&(f=a,/^[ \t\r\n]/.test(c.charAt(a))?(b=c.charAt(a),a++):(b=null,d===0&&e('[ \\t\\r\\n]')),b!==null&&(b=function(a){return undefined}(f)),b===null&&(a=f)),b}function m(){var b,h,g;var i,j;if(i=a,j=a,c.charCodeAt(a)===34?(b='"',a++):(b=null,d===0&&e('"\\""')),b!==null){if(g=f(),g===null&&(/^[^\\"]/.test(c.charAt(a))?(g=c.charAt(a),a++):(g=null,d===0&&e('[^\\\\"]'))),g!==null){h=[];while(g!==null)h.push(g),g=f(),g===null&&(/^[^\\"]/.test(c.charAt(a))?(g=c.charAt(a),a++):(g=null,d===0&&e('[^\\\\"]')))}else h=null;h!==null?(c.charCodeAt(a)===34?(g='"',a++):(g=null,d===0&&e('"\\""')),g!==null?b=[b,h,g]:(b=null,a=j)):(b=null,a=j)}else b=null,a=j;if(b!==null&&(b=function(b,a){return a.join('')}(i,b[1])),b===null&&(a=i),b===null){if(i=a,j=a,c.charCodeAt(a)===39?(b="'",a++):(b=null,d===0&&e('"\'"')),b!==null){if(g=f(),g===null&&(/^[^\\']/.test(c.charAt(a))?(g=c.charAt(a),a++):(g=null,d===0&&e("[^\\\\']"))),g!==null){h=[];while(g!==null)h.push(g),g=f(),g===null&&(/^[^\\']/.test(c.charAt(a))?(g=c.charAt(a),a++):(g=null,d===0&&e("[^\\\\']")))}else h=null;h!==null?(c.charCodeAt(a)===39?(g="'",a++):(g=null,d===0&&e('"\'"')),g!==null?b=[b,h,g]:(b=null,a=j)):(b=null,a=j)}else b=null,a=j;if(b!==null&&(b=function(b,a){return a.join('')}(i,b[1])),b===null&&(a=i),b===null){if(i=a,h=f(),h===null&&(/^[^();|"' \t\r\n]/.test(c.charAt(a))?(h=c.charAt(a),a++):(h=null,d===0&&e('[^();|"\' \\t\\r\\n]'))),h!==null){b=[];while(h!==null)b.push(h),h=f(),h===null&&(/^[^();|"' \t\r\n]/.test(c.charAt(a))?(h=c.charAt(a),a++):(h=null,d===0&&e('[^();|"\' \\t\\r\\n]')))}else b=null;b!==null&&(b=function(b,a){return a.join('')}(i,b)),b===null&&(a=i)}}return b}function f(){var b,g;var f,h;return f=a,c.substr(a,2)==='\\n'?(b='\\n',a+=2):(b=null,d===0&&e('"\\\\n"')),b!==null&&(b=function(a){return'\n'}(f)),b===null&&(a=f),b===null&&(f=a,c.substr(a,2)==='\\r'?(b='\\r',a+=2):(b=null,d===0&&e('"\\\\r"')),b!==null&&(b=function(a){return'\r'}(f)),b===null&&(a=f),b===null)&&(f=a,c.substr(a,2)==='\\t'?(b='\\t',a+=2):(b=null,d===0&&e('"\\\\t"')),b!==null&&(b=function(a){return'	'}(f)),b===null&&(a=f),b===null)&&(f=a,h=a,c.charCodeAt(a)===92?(b='\\',a++):(b=null,d===0&&e('"\\\\"')),b!==null?(c.length>a?(g=c.charAt(a),a++):(g=null,d===0&&e('any character')),g!==null?b=[b,g]:(b=null,a=h)):(b=null,a=h),b!==null&&(b=function(b,a){return a}(f,b[1])),b===null&&(a=f)),b}function t(b){b.sort();var c=null;var d=[];for(var a=0;a<b.length;a++)b[a]!==c&&(d.push(b[a]),c=b[a]);return d}function u(){var f=1;var b=1;var d=!1;for(var h=0;h<Math.max(a,g);h++){var e=c.charAt(h);e==='\n'?(d||f++,b=1,d=!1):e==='\r'||e==='\u2028'||e==='\u2029'?(f++,b=1,d=!0):(b++,d=!1)}return{line:f,column:b}}var p={multi:r,piped:j,command:h,argument:o,argumentPart:m,escape:f};if(i!==undefined){if(p[i]===undefined)throw new Error('Invalid rule name: '+b(i)+'.')}else i='multi';var a=0;var d=0;var g=0;var l=[];var q=p[i]();if(q===null||a!==c.length){var k=Math.max(a,g);var s=k<c.length?c.charAt(k):null;var n=u();throw new this.SyntaxError(t(l),s,k,n.line,n.column)}return q},toSource:function(){return this._source}},a.SyntaxError=function(a,c,d,e,f){function g(a,d){var c,e;switch(a.length){case 0:c='end of input';break;case 1:c=a[0];break;default:c=a.slice(0,a.length-1).join(', ')+' or '+a[a.length-1]}return e=d?b(d):'end of input','Expected '+c+' but '+e+' found.'}this.name='SyntaxError',this.expected=a,this.found=c,this.message=g(a,c),this.offset=d,this.line=e,this.column=f},a.SyntaxError.prototype=Error.prototype,a}()}),a.define('/src/time/Timeout.js',function(d,f,g,h){var e=a('/lib/three.js',d).three;var b=a('/lib/window.js',d).window;var c=f.Timeout=function(a,b){this._callback=a,this._delay=b,this._clock=this.clock=new e.Clock,this._timer=null};c.prototype.fire=function(){return this._timer!==null&&(b.clearTimeout(this._timer),this._timer=null),this._callback.call(null,this),this},c.prototype.rearm=function(){return this._timer!==null?this:(this._timer=b.setTimeout(this.fire.bind(this),this._delay),this)},c.prototype.disarm=function(){return this._timer===null?this:(b.clearTimeout(this._timer),this._timer=null,this._clock.stop(),this)}}),a.define('/lib/window.js',function(b,a,c,d){a.window=window}),a.define('/lib/three.js',function(b,a,c,d){a.three=THREE}),a.define('/src/data/Stream.js',function(d,e,f,g){var c=a('/src/Event.js',d).Event;var b=e.Stream=function(){c.initialize(this),this._ended=this.ended=!1};c.install(b.prototype,['data','end'],['end']),b.prototype.forwardTo=function(b,a){return a===void 0&&(a=!0),this.addEventListener('data',function(a){b.write(a.data)}),a&&this.addEventListener('end',function(){b.end()}),this},b.prototype.write=function(a){if(this._ended)throw new Error('Cannot write in closed stream');return a===void 0?this:(this.dispatchEvent('data',{data:a}),this)},b.prototype.end=function(a){return this.write(a),this._ended=this.ended=!0,this.dispatchEvent('end'),this}}),a.define('/src/Event.js',function(c,b,d,e){var a=b.Event={install:function(b,d,c){c===void 0&&(c=[]),b._events=d,b._persistentEvents=c,b.addEventListener=a.addEventListener,b.removeEventListener=a.removeEventListener,b.dispatchEvent=a.dispatchEvent,b.nextEventListener=a.nextEventListener},initialize:function(a){a._handlers=Object.create(null),a._persistedEvents=Object.create(null)},split:function(b,a){return b.split(/(?:, *)|(?:,? +)/g).map(function(b){if(a.indexOf(b)===-1)throw new Error('Unexpected event "'+b+'", expected one of "'+a.join('", "')+'"');return b})},bind:function(b,c,e,f,g){b._handlers[c]||(b._handlers[c]=[]);var d={callback:e,context:f,persists:g};b._handlers[c].push(d),b._persistedEvents[c]&&a.triggerHandler(b,c,b._persistedEvents[c],d)},unbind:function(c,d,f,g){if(!c._handlers[d])return;var b=c._handlers[d];for(var a=0,e=b.length;a<e;++a)if(b[a].callback===f&&b[a].context===g)break;b.splice(a,1)},trigger:function(b,c,d){b._persistentEvents.indexOf(c)!==-1&&(b._persistedEvents[c]=d);var e='on'+c[0].toUpperCase()+c.substr(1);if(b[e]&&b[e](d),!b._handlers[c])return;b._handlers[c].slice().forEach(function(e){a.triggerHandler(b,c,d,e)})},triggerHandler:function(c,d,e,b){b.callback.call(b.context,e),b.persists||(a.unbind(c,d,b.callback,b.context),b.persists=!0)},addEventListener:function(c,d,b){return b===void 0&&(b=this),a.split(c,this._events).forEach(function(c){a.bind(this,c,d,b,!0)},this),this},nextEventListener:function(c,d,b){return b===void 0&&(b=this),a.split(c,this._events).forEach(function(c){a.bind(this,c,d,b,!1)},this),this},removeEventListener:function(c,d,b){return b===void 0&&(b=this),a.split(c,this._events).forEach(function(c){a.unbind(this,c,d,b)}),this},dispatchEvent:function(c,b){return b===void 0&&(b={}),a.split(c,this._events).forEach(function(c){a.trigger(this,c,b)},this),this}}}),a.define('/src/data/Pipe.js',function(d,e,f,g){var b=a('/src/data/Stream.js',d).Stream;var c=e.Pipe=function(){this._input=this.input=new b,this._output=this.output=new b,this._input.forwardTo(this._output)};c.prototype.input=null,c.prototype.output=null}),a.define('/src/time/AnimationFrame.js',function(d,f,g,h){var e=a('/lib/three.js',d).three;var b=a('/lib/window.js',d).window;var c=f.AnimationFrame=function(a){this._callback=a,this._clock=this.clock=new e.Clock,this._timer=null};c.prototype.fire=function(){return this._timer!==null&&(b.cancelAnimationFrame(this._timer),this._timer=null),this._callback.call(null,this),this},c.prototype.rearm=function(){return this._timer!==null?this:(this._timer=b.requestAnimationFrame(this.fire.bind(this)),this)},c.prototype.disarm=function(){return this._timer===null?this:(b.cancelAnimationFrame(this._timer),this._timer=null,this._clock.stop(),this)}}),a.define('/src/time/Delta.js',function(d,e,f,g){var c=a('/lib/three.js',d).three;var b=e.Delta=function(a,b){this._callback=a,this._delay=b/1e3,this._clock=this.clock=new c.Clock,this._ticks=0};b.prototype.fire=function(){var a=Math.floor(this._ticks/this._delay);return this.disarm(),this._callback.call(null,this,a),this},b.prototype.rearm=function(){return this},b.prototype.disarm=function(){return this._ticks=this._ticks%this._delay,this},b.prototype.tick=function(a){return this._ticks+=a,this._ticks>=this._delay&&this.fire(),this}}),a.define('/src/time/FPSCounter.js',function(c,b,d,e){var a=b.FPSCounter=function(){this._frames=0,this._time=0,this._fps=this.fps=0};a.prototype.fps=0,a.prototype.step=function(a){return this._frames+=1,this._time+=a,this._time>1&&(this._fps=this.fps=this._frames/this._time,this._frames=0,this._time=0),this}}),a.define('/src/math.js',function(b,a,c,d){a.math={random:function(a,b){return a+Math.random()*(b-a)},clamp:function(d,a,b){if(a>b){var c=a;a=b,b=c}return Math.max(Math.min(d,b),a)},truncate:function(b,c){var a=Math.pow(10,c);return Math.round(b*a)/a}}}),a.define('/src/device/Button.js',function(b,a,c,d){a.Button={LEFT:1,RIGHT:2,MIDDLE:3}}),a.define('/src/device/mouse.js',function(e,f,h,i){var c=a('/lib/three.js',e).three;var g=a('/lib/window.js',e).window;var b=function(){this._buttons=Object.create(null),this._client=this.client=new c.Vector2,this._movement=this.movement=new c.Vector2};b.prototype.client=null,b.prototype.movement=null,b.prototype.mousedown=function(a){return this._buttons[a]={locked:!1},this},b.prototype.mouseup=function(a){return delete this._buttons[a],this},b.prototype.mousemove=function(a,b){return this._client=this.client=a,this._movement=this.movement=b,this},b.prototype.pressed=function(a,b){return a===void 0&&(a=!1),!this._buttons[a]||this._buttons[a].locked?!1:b?this._buttons[a].locked=!0:!0};var d=f.mouse=new b;document.addEventListener('mousedown',function(a){d.mousedown(a.which)}),document.addEventListener('mouseup',function(a){d.mouseup(a.which)}),document.addEventListener('mousemove',function(a){var b=new c.Vector2(a.clientX,a.clientY);var e=new c.Vector2(a.movementX,a.movementY);d.mousemove(b,e)})}),a.define('/src/device/Keyset.js',function(c,d,e,f){var b=a('/src/device/Key.js',c).Key;d.Keyset={AZERTY:[b.Q,b.Z,b.D,b.S],QWERTY:[b.A,b.W,b.D,b.S],LEFT:[b.A,b.Q,b.LEFT],UP:[b.Z,b.W,b.UP],RIGHT:[b.D,b.RIGHT],DOWN:[b.S,b.DOWN]}}),a.define('/src/device/Key.js',function(b,a,c,d){a.Key={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,D0:48,D1:49,D2:50,D3:51,D4:52,D5:53,D6:54,D7:55,D8:56,D9:57,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,BACKSPACE:8,ENTER:13,CONTROL:17}}),a.define('/src/device/keyboard.js',function(e,f,g,h){var d=a('/lib/window.js',e).window;var b=function(){this._keys=Object.create(null)};b.prototype.keydown=function(a){return this._keys[a]||(this._keys[a]={locked:!1}),this},b.prototype.keyup=function(a){return delete this._keys[a],this},b.prototype.some=function(a){return a.some(function(a){return this.pressed(a)},this)},b.prototype.pressed=function(a,b){return b===void 0&&(b=!1),!this._keys[a]||this._keys[a].locked?!1:(b&&(this._keys[a].locked=!0),!0)};var c=f.keyboard=new b;document.addEventListener('keydown',function(a){c.keydown(a.keyCode)}),d.addEventListener('keyup',function(a){c.keyup(a.keyCode)})}),a.define('/src/device/screen.js',function(f,h,i,j){var b=a('/lib/window.js',f).window;var g=a('/lib/three.js',f).three;var c=h.screen=new g.WebGLRenderer({antialias:!0});c.domElement.id='screen';var d=function(){document.body.appendChild(c.domElement),e()};var e=function(){c.setSize(b.innerWidth,b.innerHeight)};document.readyState!=='complete'?b.addEventListener('load',d):d(),b.addEventListener('resize',e)}),a.define('/src/device/console.js',function(h,j,l,k){var e=a('/lib/window.js',h).window,b=e.document;var i=a('/src/exec/shell.js',h).shell;var f=a('/src/ticker.js',h).ticker;var d=function(a){this._shell=a,this._active=this.active=!1,this._domElement=this.domElement=b.createElement('form'),this._domElement.addEventListener('submit',this._submit.bind(this)),this._historyBox=b.createElement('div'),this._domElement.appendChild(this._historyBox),this._historyBox.className='history-box',this._inputBox=b.createElement('input'),this._domElement.appendChild(this._inputBox),this._inputBox.addEventListener('blur',this._blur.bind(this)),this._inputBox.className='input-box'};d.prototype.enable=function(){return this._active?this:(this._active=this.active=!0,this._domElement.className='active',this._inputBox.focus(),this)},d.prototype.disable=function(){return this._active?(this._active=this.active=!1,this._domElement.className='',this._inputBox.blur(),this):this},d.prototype._blur=function(){if(!this._active)return;this._inputBox.focus()},d.prototype._submit=function(f){if(f.preventDefault(),!this._active)return;var d=this._inputBox.value;this._inputBox.value='';var a=b.createElement('div');this._historyBox.appendChild(a),a.className='command',a.appendChild(b.createTextNode(d));var c=b.createElement('pre');this._historyBox.appendChild(c),c.className='output';var e=this._shell.eval(d);e.addEventListener('data',function(d){var a=d.data;typeof a!=='string'&&!(a instanceof String)&&(a=a.toString()+'\n'),c.appendChild(b.createTextNode(a))})};var c=j.console=new d(i);c.domElement.id='console';var g=function(){b.body.appendChild(c.domElement)};b.readyState!=='complete'?e.addEventListener('load',g):g(),e.addEventListener('keydown',function(a){if(a.keyCode!==192&&a.keyCode!==176)return;a.preventDefault(),c.active?(f.start(),c.disable()):(f.pause(),c.enable())})}),a.define('/src/ticker.js',function(c,f,h,i){var d=a('/src/time/AnimationFrame.js',c).AnimationFrame;var e=a('/src/time/Timeout.js',c).Timeout;var b=function(){this._states=[],this._engineTimeout=new e(this._engineUpdate.bind(this),16.666666666666668),this._drawTimeout=new d(this._drawUpdate.bind(this))};b.prototype.start=function(){return this._engineTimeout.fire(),this._drawTimeout.fire(),this},b.prototype.stop=function(){return this._engineTimeout.disarm(),this._drawTimeout.disarm(),this},b.prototype.pause=function(){this._engineTimeout.disarm()},b.prototype.add=function(a){return this._states.indexOf(a)!==-1?this:(this._states.push(a),this)},b.prototype.remove=function(a){return this._states.splice(this._states.indexOf(a),1),this},b.prototype._engineUpdate=function(){var a=arguments;this._engineTimeout.rearm(),this._states.forEach(function(b){b.engineUpdate&&b.engineUpdate.apply(b,a)})},b.prototype._drawUpdate=function(){var a=arguments;this._drawTimeout.rearm(),this._states.forEach(function(b){b.drawUpdate&&b.drawUpdate.apply(b,a)})};var g=f.ticker=new b}),a.define('/src/thread/Multi.js',function(d,e,f,g){var c=a('/lib/window.js',d).window;var b=e.Multi=function(a){this._sources=a};b.script=['( function ( ) {','    var origin, dirname;','','    var realImportScripts = self.importScripts;','    self.importScripts = function ( ) {','        return realImportScripts.apply( this, Array.prototype.map.call( arguments, function ( source ) {','            source = source.toString( );','',"            if ( source.indexOf( ':' ) !== - 1 )",'                return source;','',"            if ( source[ 0 ] === '/' )",'                source = origin + source;','','            return origin + dirname + source;','','        } ) );','    };','','    var fn = function ( e ) {',"        self.removeEventListener( 'message', fn );",'        origin = e.data.origin, dirname = e.data.dirname;','        self.importScripts.apply( self, e.data.sources );','    };','',"    self.addEventListener( 'message', fn );",'','} )( );'],b.url=function(){return b._url||(b._url=c.URL.createObjectURL(new c.Blob([b.script.join('\n')],{type:'text/javascript'}))),b._url},b.prototype.build=function(){var a=new c.Worker(b.url());var d=c.location.protocol+'//'+c.location.host;var e=c.location.pathname.substr(0,c.location.pathname.lastIndexOf('/'))+'/';return a.postMessage({origin:d,dirname:e,sources:this._sources}),a}}),a.define('/src/thread/Solo.js',function(d,e,f,g){var b=a('/lib/window.js',d).window;var c=e.Solo=function(a){this._source=a};c.prototype.build=function(){return new b.Worker(this._source)}}),a.define('/src/thread/Pool.js',function(d,e,f,g){var c=a('/src/Event.js',d).Event;var b=e.Pool=function(d,e){c.initialize(this),this._tasks=[],this._instances=[],this._availableInstances=[];for(var a=0;a<e;++a){var b=d.build();b.addEventListener('message',this._complete.bind(this,a)),b.addEventListener('error',this._error.bind(this,a)),this._instances.push({worker:b,task:null}),this._availableInstances.push(a)}};c.install(b.prototype,['push','shift','complete','error']),b.prototype.broadcast=function(a){return this._instances.forEach(function(b){b.worker.postMessage(a)}),this},b.prototype.push=function(a){return this._tasks.push(a),this.dispatchEvent('push',{task:a}),this.shift(),this},b.prototype.shift=function(){if(this._tasks.length===0||this._availableInstances.length===0)return this;var a=this._tasks.shift();var b=this._instances[this._availableInstances.shift()];return b.worker.postMessage(b.task=a),this.dispatchEvent('shift',{task:a}),this},b.prototype.steady=function(){return this._tasks.length===0&&this._instances.length===this._availableInstances.length},b.prototype._extractTask=function(a){var b=this._instances[a].task;return this._instances[a].task=null,b},b.prototype._complete=function(b,a){if(a.data instanceof Array){console.log.apply(console,a.data);return}this._availableInstances.push(b),this.dispatchEvent('complete',{task:this._extractTask(b),data:a.data}),this.shift()},b.prototype._error=function(a,b){this._availableInstances.push(a),this.dispatchEvent('error',{task:this._extractTask(a),event:b}),this.shift()}}),b.SWAT=a('/manifest.js')}.call(this,this))
/*
//@ sourceMappingURL=Swat.map.js
*/